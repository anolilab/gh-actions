# https://github.com/probot/settings

branches:
    - name: "main"

      # https://docs.github.com/en/rest/reference/repos#delete-branch-protection
      # https://docs.github.com/en/rest/reference/repos#update-branch-protection

      protection:
          # Required. Enforce all configured restrictions for administrators. Set to true to enforce required status checks for repository administrators. Set to null to disable.
          enforce_admins: true

          required_pull_request_reviews:
              # Dismiss approved reviews automatically when a new commit is pushed.
              dismiss_stale_reviews: true
              # Blocks merge until code owners have reviewed.
              require_code_owner_reviews: true
              # The number of approvals required. (1-6)
              required_approving_review_count: 1
              # Specify which users and teams can dismiss pull request reviews. Pass an empty dismissal_restrictions object to disable. User and team dismissal_restrictions are only available for organization-owned repositories. Omit this parameter for personal repositories.
              dismissal_restrictions:
                  users: []
                  teams: []

          required_status_checks:
              contexts:
                  - context: "Semantic Pull Request"
                  - context: "Check Lint Run"
                  - context: "Check Test Run"
                  - context: "Check Bundle Analysis Run"

              strict: true

          # https://developer.github.com/v3/repos/branches/#parameters-10
          # Required. Restrict who can push to this branch. Team and user restrictions are only available for organization-owned repositories. Set to null to disable.
          restrictions:
              apps:
                  - "semantic-release-bot"
                  - "renovate"
              teams: null
              users: null

# https://docs.github.com/en/rest/reference/repos#update-a-repository

repository:
    allow_merge_commit: true
    allow_rebase_merge: false
    allow_squash_merge: true
    archived: false
    default_branch: "main"
    delete_branch_on_merge: true
    description: "Shared Github Actions for Node.js projects and Monorepos."
    has_discussions: true
    has_downloads: true
    has_issues: true
    has_pages: false
    has_projects: false
    has_wiki: false
    enable_vulnerability_alerts: true
    enable_automated_security_fixes: true
    name: "workflows"
    private: false

    # https://developer.github.com/v3/repos/branches/#remove-branch-protection

    topics: "anolilab, gh-action, gh-actions, github-action, github-actions, node, nodejs, shared, workflow, workflows, monorepo, monorepository, monorepos, monorepositories, single-repo, single-repository, single-repos, single-repositories, shared-workflow, shared-workflows, shared-workflow, shared-workflows, shared-github-action, shared-github-actions, shared-github-action, shared-github-actions"
